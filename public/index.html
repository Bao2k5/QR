<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MÃ³n quÃ  bÃ­ máº­t ğŸ</title>
    <link rel="stylesheet" href="style.css?v=8">
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
    <!-- Background Slideshow Container in HTML for cross-fade -->
    <div class="bg-slideshow">
        <div class="bg-slide" style="background-image: url('bg1.jpg');"></div>
        <div class="bg-slide" style="background-image: url('bg2.jpg');"></div>
        <div class="bg-slide" style="background-image: url('bg3.jpg');"></div>
        <div class="bg-slide" style="background-image: url('bg4.png');"></div>
        <div class="bg-slide" style="background-image: url('bg5.png');"></div>
        <div class="bg-slide" style="background-image: url('bg6.png');"></div>
        <div class="bg-slide" style="background-image: url('bg7.png');"></div>
        <div class="bg-slide" style="background-image: url('bg8.png');"></div>
    </div>

    <div class="container">
        <audio id="bg-music" loop>
            <source src="music.mp3" type="audio/mpeg">
        </audio>
        <!-- Scene 1: The Gift Box -->
        <div id="gift-scene" class="scene">
            <h1 class="title">CÃ³ má»™t mÃ³n quÃ  bÃ­ máº­t dÃ nh cho chá»‹ iu nÃ¨! <br> Má»Ÿ Ä‘i!</h1>
            <div class="gift-box-container" id="open-btn">
                <div class="gift-box">
                    <div class="lid"></div>
                    <div class="box"></div>
                    <div class="ribbon"></div>
                </div>
                <div class="shadow"></div>
            </div>
            <p class="hint">(Cháº¡m vÃ o há»™p quÃ  Ä‘á»ƒ má»Ÿ)</p>
        </div>

        <!-- Scene 2: The Prank (Funny) -->
        <div id="prank-scene" class="scene hidden">
            <h1 class="prank-text">Biáº¿t ngay lÃ  tÃ² mÃ² mÃ ! ğŸ¤£</h1>
            <div class="image-container">
                <!-- Placeholder for funny image (Pig) -->
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnZ4nHV4cXV4cXV4cXV4cXV4cXV4cXV4cXV4cXV4/LqVdZ5bM4M4M/giphy.gif"
                    alt="Funny Pig" class="funny-img">
            </div>
            <p class="sub-text">Chá»‹ iu lÃ  Ä‘á»“ ngá»‘c sá»‹t! LÃªu lÃªu ğŸ˜</p>
            <button id="runaway-btn">Giáº­n quÃ¡ táº¯t luÃ´n!</button>
        </div>

        <!-- Fake Loading Scene (New Prank) -->
        <div id="loading-scene" class="scene hidden"
            style="background: rgba(0,0,0,0.9); position: fixed; top:0; left:0; width:100%; height:100%; z-index: 1000; color: white;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                <div class="spinner"></div>
                <h2 id="loading-text" style="margin-top: 20px;">Äang táº£i...</h2>
            </div>
        </div>

        <!-- Scene 3: The True Wishes (Interactive Story) -->
        <div id="wish-scene" class="scene hidden">
            <!-- Step 1 -->
            <div id="wish-step-1" class="wish-step">
                <h1 class="wish-title">Thá»© nháº¥t nÃ¨... ğŸŒŸ</h1>
                <div class="wish-card">
                    <p class="message">ChÃºc chá»‹ iu nhá»¯ng ngÃ y thÃ¡ng sáº¯p tá»›i sáº½ cÃ³ tháº­t nhiá»u niá»m vui nÃ¨! <br> ğŸ¥°ğŸ¥°ğŸ¥°
                    </p>
                    <button class="next-btn" onclick="nextWish(2)">Xem tiáº¿p hÃ´ng?</button>
                </div>
            </div>

            <!-- Step 2 -->
            <div id="wish-step-2" class="wish-step hidden">
                <h1 class="wish-title">Thá»© hai lÃ ... âœŒï¸</h1>
                <div class="wish-card sad-theme" id="card-2">
                    <h3 id="title-2" style="margin-top: 0; color: #d63031;">Hong bÃ¹n ná»¯a nho! ğŸ¥º</h3>
                    <p class="message" id="msg-2">
                        Quáº³ng gÃ¡nh lo Ä‘i mÃ  vui sá»‘ng... <br>
                        Má»—i khi buá»“n thÃ¬ cÃ³ thá»ƒ tÃ¢m sá»± vá»›i <span class="highlight">em Báº£o</span> nÃ¨. <br>
                        Äá»«ng giá»¯ trong lÃ²ng má»™t mÃ¬nh nhen!
                    </p>
                    <button class="next-btn" onclick="transformSadToHappy()">Há»©a Ä‘i!</button>
                </div>
            </div>

            <!-- Step 3 -->
            <div id="wish-step-3" class="wish-step hidden">
                <h1 class="wish-title">Thá»© ba lÃ ... ğŸ¤Ÿ</h1>
                <div class="wish-card">
                    <div class="avatar-circle">ğŸ‘¦</div> <!-- Placeholder for 'Em Báº£o' -->
                    <p class="message">
                        "NghÄ© nhá»¯ng Ä‘iá»u tá»‘t Ä‘áº¹p lÃªn nho. <br>
                        Má»—i khi vui thÃ¬ nhá»› nÃ³i cho <span class="highlight">em Báº£o</span> nhe. <br>
                        Em Báº£o sáº½ luÃ´n bÃªn cáº¡nh á»§ng há»™ chá»‹ <br>
                        nhÆ° cÃ¡ch thay lá»i cáº£m Æ¡n chá»‹ Ä‘Ã£ á»§ng há»™ em Báº£o nÃ¨! ğŸ’ª"
                    </p>
                    <button class="next-btn" onclick="nextWish(4)">CÃ²n ná»¯a nÃ¨...</button>
                </div>
            </div>

            <!-- Step 4 -->
            <div id="wish-step-4" class="wish-step hidden">
                <h1 class="wish-title">Äiá»u cuá»‘i cÃ¹ng... âœ¨</h1>
                <div class="wish-card final-card">
                    <p class="message">
                        Má»—i ngÃ y luÃ´n lÃ  má»™t niá»m vui vá»›i <span class="highlight">ThÃ¹y Anh</span> Ã¡ <br>
                        NÃªn lÃ  cá»© tiáº¿p tá»¥c vá»¯ng bÆ°á»›c trÃªn con Ä‘Æ°á»ng mÃ¬nh chá»n nho! ğŸ’ƒğŸ’ƒğŸ’ƒ
                    </p>
                    <div class="hearts">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</div>
                    <!-- The 'Salt' added here -->
                    <button class="next-btn" id="final-btn" onclick="finishStory()"
                        style="background-color: #eb4d4b; margin-top: 15px;">KÃ½ tÃªn nháº­n quÃ  âœï¸</button>
                    <p id="final-troll" class="hidden"
                        style="margin-top: 10px; font-weight: bold; color: #d63031; font-size: 0.9rem;">(Äá»c ká»¹ hÆ°á»›ng
                        dáº«n sá»­ dá»¥ng trÆ°á»›c khi dÃ¹ng)</p>
                </div>
            </div>
        </div>
    </div> <!-- End container -->

    <!-- Custom Modal Loop (Moved outside container for safety) -->
    <div id="custom-modal" class="modal hidden">
        <div class="modal-content">
            <h2>XÃC NHáº¬N THÃ€NH CÃ”NG!</h2>
            <p>Há»‡ thá»‘ng Ä‘Ã£ ghi nháº­n: <span class="highlight">ThÃ¹y Anh</span> Ä‘á»“ng Ã½ bao Báº£o má»™t cháº§u <strong>BÃ¡nh
                    Ngá»t</strong> tháº­t ngon Ä‘á»ƒ tráº£ cÃ´ng lÃ m chiáº¿c web xá»‹n xÃ² nÃ y! ğŸ°</p>
            <p class="sub-modal">KhÃ´ng Ä‘Æ°á»£c Ä‘á»•i Ã½ nha! Chá»¥p mÃ n hÃ¬nh lÃ m báº±ng chá»©ng rá»“i Ä‘Ã³! ğŸ“¸ğŸ˜</p>
            <button class="close-btn" onclick="closeModal()">ÄÃ£ rÃµ, huhu ğŸ˜­</button>
        </div>
    </div>

    <script src="script.js?v=8"></script>
</body>

</html>